---
title: 設置 IAM 政策來管理權限
date: 2024-03-03 21:00:00 +0800
categories: [Software, Cloud Service]
tags: [AWS, Cloud Service] # TAG names should always be lowercase
excerpt: "設置 IAM 政策來管理權限"
---

### 如何設置 IAM 策略來管理權限

IAM 策略（Policy）是 AWS 中管理權限的核心工具。通過 IAM 策略，您可以控制哪些操作和資源可供 IAM 使用者、群組或角色使用。以下是設置 IAM 策略的詳細步驟和最佳實踐。

#### 1. **理解 IAM 策略的結構**

IAM 策略是以 JSON 格式編寫的文件，描述了授予或拒絕對 AWS 服務和資源的訪問權限。每個策略包含以下幾個關鍵部分：

- **Version**：定義策略語言的版本，目前大多數策略使用 `"2012-10-17"` 版本。
- **Statement**：包含一個或多個具體的權限聲明。每個聲明包括以下部分：
  - **Effect**：指定是 `Allow`（允許）還是 `Deny`（拒絕）操作。
  - **Action**：指定可以執行的 AWS 服務操作（例如 `s3:ListBucket`）。
  - **Resource**：指定操作適用的 AWS 資源（例如 `arn:aws:s3:::my-bucket`）。
  - **Condition**（可選）：指定操作適用的條件（例如特定的 IP 地址範圍或日期）。

#### 2. **創建 IAM 策略**

您可以通過 AWS 管理控制台、AWS CLI 或 IAM API 來創建 IAM 策略。以下是使用 AWS 管理控制台創建策略的步驟：

**步驟一：進入 IAM 控制台**

1. 登入 AWS 管理控制台。
2. 在服務選單中，選擇「IAM」。

**步驟二：創建新策略**

1. 在 IAM 儀表板中，點擊左側選單的「策略」。
2. 點擊「創建策略」（Create policy）按鈕。

**步驟三：選擇策略創建方式**

1. 您可以選擇使用「視覺化編輯器」或「JSON 編輯器」來創建策略：
   - **視覺化編輯器**：提供圖形界面，適合不熟悉 JSON 語法的用戶。
   - **JSON 編輯器**：適合需要創建自定義或複雜策略的用戶。

2. 以下示範如何使用視覺化編輯器創建一個簡單的 S3 策略。

**步驟四：使用視覺化編輯器創建 S3 策略**

1. **選擇服務**：在「服務」選項中，選擇「S3」作為目標服務。
2. **指定操作**：在「操作」部分，選擇您希望授予的操作。例如：
   - `ListBucket`：允許列出 S3 存儲桶中的對象。
   - `GetObject`：允許從存儲桶中檢索對象。

3. **指定資源**：在「資源」部分，選擇具體的資源 ARN。例如：
   - 對於特定的 S3 存儲桶：`arn:aws:s3:::my-bucket`
   - 對於存儲桶中的所有對象：`arn:aws:s3:::my-bucket/*`

4. **設置條件（可選）**：在「條件」部分，您可以添加限制條件，例如允許操作僅限於某些 IP 地址或特定時間段。

**步驟五：審查並創建策略**

1. 在策略的審查頁面，檢查您設置的所有選項。
2. 為策略命名並添加描述（可選）。
3. 點擊「創建策略」完成。

#### 3. **附加策略到使用者、群組或角色**

創建策略後，您需要將其附加到使用者、群組或角色，這樣他們才能獲得相應的權限。

**步驟一：選擇使用者、群組或角色**

1. 在 IAM 儀表板中，選擇左側選單中的「使用者」、「群組」或「角色」。
2. 點擊要附加策略的目標實體（使用者、群組或角色）。

**步驟二：附加策略**

1. 在詳細頁面中，找到「權限」標籤，點擊「添加權限」。
2. 選擇「附加現有策略」。
3. 從列表中選擇剛剛創建的策略，並點擊「附加策略」。

#### 4. **最佳實踐**

- **最小權限原則**：僅授予完成任務所需的最低權限。避免使用過於寬泛的權限（如 `AdministratorAccess`），除非絕對必要。
- **定期審查策略**：定期檢查和更新 IAM 策略，確保它們與當前的業務需求和安全標準保持一致。
- **使用條件和資源 ARN**：通過使用條件和資源 ARN 限制策略的適用範圍，減少潛在的安全風險。
- **審計和監控**：使用 AWS CloudTrail 監控 IAM 策略的使用情況，並記錄誰在何時執行了什麼操作。

### 總結

設置 IAM 策略是 AWS 安全管理的重要部分。通過創建和附加策略，您可以靈活地控制誰可以訪問哪些 AWS 資源，並確保您的 AWS 環境安全、合規。理解並遵循 IAM 策略的最佳實踐，能夠有效降低風險並提高操作效率。
